<% layout('/layouts/boilerplate.ejs') %>

<div id="map" style="width: 100%; height: 400px"></div>

<h1>All campgrounds</h1>
<div>
	<a href="campgrounds/new">New Campground</a>
</div>

<% for(let campground of campgrounds) {%>
<div class="card my-3">
	<div class="row p-1">
		<img
			src="<%= campground.images[0].url %>"
			alt=""
			class="col-md-4 img-fluid"
		/>
		<div class="col-md-8">
			<div class="card-body">
				<h5 class="card-title"><%= campground.title %></h5>
				<p class="card-text"><%= campground.description %></p>
				<p class="card-text">
					<small class="text-muted"><%= campground.location %></small>
				</p>
				<a class="btn btn-primary" href="campgrounds/<%= campground._id%>"
					>View <%= campground.title %>
				</a>
			</div>
		</div>
	</div>
</div>

<% } %>

<script>
	const mapboxToken = '<%=process.env.MAPBOX_TOKEN%>';
	const campgrounds ={features: <%-JSON.stringify(campgrounds)%>}
</script>

<script src="/scripts/clusterMap.js"></script>
